---
title: 25 years of open source forecasting software
author: Rob J Hyndman
date: 26 June 2025
toc: true
format:
  presentation-beamer:
    pdf-engine: pdflatex
    knitr:
      opts_chunk:
        dev: "CairoPDF"
    keep-tex: true
    fig-width: 8
    fig-height: 4.3
highlight-style: tango
execute:
  echo: false
  message: false
  warning: false
  cache: false
---

```{r}
#| label: load-packages
library(fpp3)
library(tibble)
library(cranlogs)
library(kableExtra)

options(
  digits = 4,
  ggplot2.continuous.colour = "viridis",
  ggplot2.continuous.fill = "viridis",
  ggplot2.discrete.colour = c(
    "#D55E00",
    "#0072B2",
    "#009E73",
    "#CC79A7",
    "#E69F00",
    "#56B4E9",
    "#F0E442"
  ),
  ggplot2.discrete.fill = c(
    "#D55E00",
    "#0072B2",
    "#009E73",
    "#CC79A7",
    "#E69F00",
    "#56B4E9",
    "#F0E442"
  )
)
ggplot2::theme_set(
  theme_get() + theme(text = element_text(family = 'Fira Sans'))
)
```

```{r}
#| label: r-package-downloads
#| cache: true
packages <- c(
  "acp",
  "autostsm.statespacer",
  "BayesARIMAX",
  "bayesforecast",
  "BayesSSM",
  "bsts",
  "fable.prophet",
  "fable",
  "flap",
  "forecast",
  "ForecastComb",
  "forecastHybrid",
  "forecastML",
  "forecTheta",
  "GAS",
  "gasmodel",
  "glarma",
  "greybox",
  "hts",
  "hts",
  "kDGLM",
  "legion",
  "MAPA",
  "MAPA",
  "modeltime",
  "mvgam",
  "nnfor",
  "opera",
  "prophet",
  "PTSR",
  "scoringRules",
  "scoringutils",
  "smooth",
  "tfarima",
  "thief",
  "tscount",
  "tsintermittent",
  "tsissm",
  "tsmodels",
  "tsutils",
  "tsutils",
  "Ucomp",
  "ZIM",
  "ZINARp"
)
downloads <- cran_downloads(
  packages = packages,
  from = as.Date("2000-01-01"),
  to = Sys.Date()
) |>
  as_tibble()
first_download <- downloads |>
  filter(count > 0) |>
  pull(date) |>
  min()  
downloads <- downloads |>
  filter(
    date >= first_download,
    date < Sys.Date() - 1 # Avoid partial counts
  ) |>
  mutate(Month = yearmonth(date)) |>
  group_by(Month, package) |>
  summarise(Count = sum(count), .groups = "drop")
top_ten <- downloads |>
  group_by(package) |>
  summarise(Count = sum(Count)) |>
  arrange(desc(Count)) |>
  head(10)
top_ten_last5 <- downloads |>
  filter(year(Month) >= 2020) |>
  group_by(package) |>
  summarise(Count = sum(Count)) |>
  arrange(desc(Count)) |>
  head(10)
```

# R

## Early R forecasting (c.2000)
\fontsize{14}{17}\sf

`ts` package (now `stats` package):

* `HoltWinters()`: point forecasts only, with optional multiplicative seasonality (written by David Meyer).
* `arima()`: state space formulation of ARIMA models\newline (written by Brian Ripley).
* `structTS()`: Basic structural models as per Harvey\newline (written by Brian Ripley).

\pause

### 
* Each had a `predict()` method, but output was inconsistent.
* `HoltWinters` did not produce prediction intervals.

## forecast package for R

* Consistent output for existing methods by introducting new S3 generic `forecast()` and new S3 class `forecast`.
* Add new methods including `ets()`, `thetaf()`, `auto.arima()`.
* Modelling functions should be able to be swapped while leaving code unchanged.
* Easy plotting tools with new `plot.forecast()` method.
* Add forecasting tools such as `accuracy()` calculations.

## forecast package for R
\fontsize{13}{14}\sf\vspace*{-0.5cm}

```{r}
history <- tribble(
  ~Date,
  ~Event,
  "Pre 2003",
  "Collection of functions used for consulting projects",
  "July/August 2003",
  "\\texttt{ets()} and \\texttt{thetaf()} added",
  "August 2006",
  "\\textbf{v1.0} available on CRAN",
  "May 2007",
  "\\texttt{auto.arima()} added",
  "July 2008",
  "JSS paper (Hyndman \\& Khandakar)",
  "September 2009",
  "\\textbf{v2.0}. Unbundled from Mcomp, fma \\& expsmooth",
  "May 2010",
  "\\texttt{arfima()} added",
  "Feb/March 2011",
  "\\texttt{tslm()}, \\texttt{stlf()}, \\texttt{naive()}, \\texttt{snaive()} added",
  "August 2011",
  "\\textbf{v3.0}. Box Cox transformations added",
  "December 2011",
  "\\texttt{tbats()} added",
  "April 2012",
  "Package moved to github",
  "November 2012",
  "\\textbf{v4.0}. \\texttt{nnetar()} added",
  "June 2013",
  "Major speed-up of \\texttt{ets()}",
  "January 2014",
  "\\textbf{v5.0}. \\texttt{tsoutliers()} and \\texttt{tsclean()} added",
  "May 2015",
  "\\textbf{v6.0}. Added several new plots",
  "February 2016",
  "\\textbf{v7.0}. Added ggplot2 graphics \\& bias adjustment",
  "March 2017",
  "\\textbf{v8.0}. Added \\texttt{tsCV()} \\& \\texttt{baggedETS()}",
  "April 2018",
  "\\textbf{v8.3}. Added \\texttt{mstl()}, and revised \\texttt{auto.arima()}",
  "April 2025 ",
  "\\textbf{v8.24}. Last update"
)
history |>
  head(10) |>
  kbl(longtable = FALSE, booktabs = TRUE, escape = FALSE, linesep = "") |>
  column_spec(1, width = "4cm") |>
  column_spec(2, width = "10cm") |>
  row_spec(0, bold = TRUE)
```

## forecast package for R
\fontsize{13}{14}\sf\vspace*{-0.5cm}

```{r}
history |>
  tail(-10) |>
  kbl(longtable = FALSE, booktabs = TRUE, escape = FALSE, linesep = "") |>
  column_spec(1, width = "4cm") |>
  column_spec(2, width = "10cm") |>
  row_spec(0, bold = TRUE)
```

\vspace*{10cm}

## forecast package for R

```{r}
downloads |>
  filter(package == "forecast") |>
  ggplot(aes(x = Month, y = Count/1e3)) +
  geom_line() +
  labs(y = "Downloads (thousands)")
```

## forecast package for R
\fontsize{13}{14}\sf\vspace*{-0.2cm}

* `auto.arima` + `forecast`
* `ets` + `forecast`
* `tbats` + `forecast`
* `bats` + `forecast`
* `arfima` + `forecast`
* `nnetar` + `forecast`
* `stlm` + `forecast`
* `meanf`
* `rwf`, `naive`
* `thetaf`
* `dshw`, `hw`, `holt`, `ses`
* `splinef`
* `croston`

\fontsize{14}{16}\sf
\begin{textblock}{5}(9,1.5)
\begin{block}{}
All produce an object of class \texttt{forecast}
\end{block}
\end{textblock}

\only<2>{\begin{textblock}{5}(9,3.8)
\begin{block}{}
\textbf{v9.0} will have new model functions:
\begin{itemize}\tightlist
\item \texttt{mean\_model()}
\item \texttt{rw\_model()}
\item \texttt{theta\_model()}
\item \texttt{spline\_model()}
\item \texttt{croston\_model}
\end{itemize}
\end{block}
\end{textblock}}


## CRAN Task View Time Series

\placefig{-0.3}{1.2}{width=16.7cm, trim=0 0 0 40, clip=true}{figs/ctvts.pdf}

## Top ten downloaded forecasting packages on CRAN
\fontsize{13}{15}\sf\tabcolsep=0cm\vspace*{-0.5cm}

```{r}
top_ten <- top_ten |>
  mutate(Count = round(Count / 1e3,1)) 
colnames(top_ten) <- c("Package", "Downloads ('000)")
top_ten |>
  kbl(longtable = FALSE, booktabs = TRUE, linesep="") |>
  column_spec(0, bold = TRUE)
```

\placefig{10.75}{1.5}{width=2.5cm}{forecast.png}
\placefig{13.25}{1.5}{width=2.5cm}{fable.png}

\placefig{9.5}{3.65}{width=2.5cm}{hts.png}
\placefig{12}{3.65}{width=2.5cm}{thief.png}

\placefig{10.75}{5.8}{width=2.5cm}{smooth.png}
\placefig{13.25}{5.8}{width=2.5cm}{greybox.png}


## Top ten downloaded forecasting packages on CRAN

```{r}
downloads |>
  rename(Package = package) |>
  filter(Package %in% top_ten$Package) |>
  filter(Package != "forecast") |>
  ggplot(aes(x = Month, y = Count/1e3, color = Package)) +
  geom_line() +
  labs(y = "Downloads (thousands)")
```

# Python 

## Python packages

* `pmdarima`
* `sktime`
* Nixtla: `statsforecast`, `hierarchicalforecast`
* `GluonTS`
* `Merlion`
* `statsmodels`,
* `pyhts`
* `Darts`

# Julia
## Julia

* `forecast`
